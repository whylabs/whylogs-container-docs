{"openapi":"3.0.1","info":{"title":"whylogs container API","description":"Container that hosts the java version of whylogs behind a REST interface.","version":"1.0"},"paths":{"/pubsubLogs":{"post":{"tags":["whylogs"],"summary":"Track pub/sub messages","description":"Decode base64 encoded pub/sub message and track them","operationId":"trackPubSubMessage","parameters":[{"name":"X-API-Key","in":"header","schema":{"type":"string"}}],"requestBody":{"description":"\n                A Google Pub\\Sub interface to tracking data. Does the same thing as /track except\n                it consumes a message in the format that Pub\\Sub uses.\n","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PubSubEnvelope"}}}},"responses":{"200":{"description":"OK"},"500":{"description":"Something unexpected went wrong."}}}},"/logs":{"post":{"tags":["whylogs"],"summary":"Log Data","description":"Log a map of feature names and values or an array of data points","operationId":"track","parameters":[{"name":"X-API-Key","in":"header","schema":{"type":"string"}}],"requestBody":{"description":"\nPass the input in single entry format or a multiple entry format.\n- Set `single` key if you're passing a single data point with multiple features\n- Set `multiple` key if you're passing multiple data at once.\nThe `multiple` format is is compatible with Pandas JSON output:\n```\nimport pandas as pd\ncars = {'Brand': ['Honda Civic','Toyota Corolla','Ford Focus','Audi A4'],\n        'Price': [22000,25000,27000,35000] }\ndf = pd.DataFrame(cars, columns = ['Brand', 'Price'])\ndf.to_json(orient=\"split\") # this is the value of `multiple`\n```\nHere is an example from the output above\n```\n{\n    \"datasetId\": \"demo-model\",\n    \"timestamp\": 1648162494947,\n    \"tags\": {\n        \"tag1\": \"value1\"\n    },\n    \"multiple\": {\n        \"columns\": [\n            \"Brand\",\n            \"Price\"\n        ],\n        \"data\": [\n            [ \"Honda Civic\", 22000 ],\n            [ \"Toyota Corolla\", 25000 ],\n            [ \"Ford Focus\", 27000 ],\n            [ \"Audi A4\", 35000 ]\n        ]\n    }\n}\n```\n","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogRequest"}}}},"responses":{"200":{"description":"OK"},"400":{"description":"Bad or invalid input body"}}}},"/writeProfiles":{"post":{"tags":["whylogs"],"summary":"Write Profiles","description":"Force the container to write out the pending profiles via whatever method it's configured for.","operationId":"writeProfiles","parameters":[{"name":"X-API-Key","in":"header","schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WriteProfilesResponse"}}}},"500":{"description":"Something unexpected went wrong."}}}},"/logDebugInfo":{"post":{"tags":["debug"],"summary":"Log Debug Info","description":"Trigger debugging info to be logged.","operationId":"logDebugInfo","parameters":[{"name":"X-API-Key","in":"header","schema":{"type":"string"}}],"responses":{"200":{"description":"OK"},"500":{"description":"Something unexpected went wrong."}}}},"/health":{"get":{"tags":["debug"],"summary":"Tell if the http server is healthy.","description":"Tell if the http server is healthy.","operationId":"health","responses":{"200":{"description":"OK"},"500":{"description":"Something unexpected went wrong."}}}}},"components":{"schemas":{"Message":{"required":["data","messageId","publishTime"],"type":"object","properties":{"attributes":{"type":"object","additionalProperties":{"type":"string","example":"{\"key\":\"value\"}"},"example":{"key":"value"}},"data":{"type":"string","description":"The message data field. If this field is empty, the message must contain at least one attribute.","example":"ewogICAgImRhdGFzZXRJZCI6ICJkZW1vLW1vZGVsIiwKICAgICJ0aW1lc3RhbXAiOiAxNjQ4MTYyNDk0OTQ3LAogICAgInRhZ3MiOiB7CiAgICAgICAgInRhZzEiOiAidmFsdWUxIgogICAgfSwKICAgICJtdWx0aXBsZSI6IHsKICAgICAgICAiY29sdW1ucyI6IFsKICAgICAgICAgICAgIkJyYW5kIiwKICAgICAgICAgICAgIlByaWNlIgogICAgICAgIF0sCiAgICAgICAgImRhdGEiOiBbCiAgICAgICAgICAgIFsgIkhvbmRhIENpdmljIiwgMjIwMDAgXSwKICAgICAgICAgICAgWyAiVG95b3RhIENvcm9sbGEiLCAyNTAwMCBdLAogICAgICAgICAgICBbICJGb3JkIEZvY3VzIiwgMjcwMDAgXSwKICAgICAgICAgICAgWyAiQXVkaSBBNCIsIDM1MDAwIF0KICAgICAgICBdCiAgICB9Cn0K"},"messageId":{"type":"string","example":"123"},"publishTime":{"type":"string","description":"A timestamp in RFC3339 UTC 'Zulu' format, with nanosecond resolution and up to nine fractional digits","example":"2014-10-02T15:01:23Z"},"orderingKey":{"type":"string","description":"If non-empty, identifies related messages for which publish order should be respected"}},"description":"Envelope containing all metadata from pubsub push endpoint request"},"PubSubEnvelope":{"required":["message","subscription"],"type":"object","properties":{"message":{"$ref":"#/components/schemas/Message"},"subscription":{"type":"string","description":"Key value object containing subscription name","example":"projects/myproject/subscriptions/mysubscription"}},"description":"Represents a single Google Cloud pub/sub message."},"LogRequest":{"required":["datasetId"],"type":"object","properties":{"datasetId":{"type":"string","example":"model-2"},"timestamp":{"type":"integer","format":"int64"},"tags":{"type":"object","additionalProperties":{"type":"string","example":"{\"city\":\"Seattle\",\"job\":\"SDE\"}"},"example":{"city":"Seattle","job":"SDE"}},"single":{"type":"object","additionalProperties":{"type":"object","description":"Key/value pairs of col/data.","example":{"col1":1,"col2":"value"}},"description":"Key/value pairs of col/data.","example":{"col1":1,"col2":"value"}},"multiple":{"$ref":"#/components/schemas/MultiLog"}}},"MultiLog":{"required":["columns","data"],"type":"object","properties":{"columns":{"type":"array","example":["column1","column2"],"items":{"type":"string","example":"[\"column1\",\"column2\"]"}},"data":{"type":"array","example":[["column1Value1",1.0],["column1Value2",2.0]],"items":{"type":"array","example":[["column1Value1",1.0],["column1Value2",2.0]],"items":{"type":"object","example":[["column1Value1",1.0],["column1Value2",2.0]]}}}}},"WriteProfilesResponse":{"required":["profilePaths","profilesWritten"],"type":"object","properties":{"profilesWritten":{"type":"integer","description":"The amount of profiles that were written out.","format":"int32","example":2},"profilePaths":{"type":"array","description":"The paths of the profiles that were written if they exist. Some writers may not write profiles to anyplace that can be described as a path.","example":["s3://bucket/path/profile.bin"],"items":{"type":"string","description":"The paths of the profiles that were written if they exist. Some writers may not write profiles to anyplace that can be described as a path.","example":"[\"s3://bucket/path/profile.bin\"]"}}},"description":"Response for writing out profiles."}}}}